\def\spielname{Flow}
Beim Spiel \spielname{} (als App {\em Flow Free} im AppStore erhältlich)
sind auf einem $n\times m$-Spielfeld Paare von farbigen
Punkten vorgegeben (Abbildung links).
Der Spieler muss jeweils gleichfarbige Punkte durch einen Weg verbinden,
der vollständig über freie Felder des Spielfeldes verläuft.
Dabei darf ein Feld nicht von zwei verschiedenen Wegen benutzt werden
(Abbildung rechts).
\begin{center}
\includeagraphics[width=0.4\hsize]{\spielname-aufgabe.png}
\qquad
\includeagraphics[width=0.4\hsize]{\spielname-loesung.png}
\end{center}
Kann eine nicht deterministische Turing-Maschine ein \spielname-Rätsel in
polynomieller Zeit lösen?

\thema{polynomieller Verifizierer}
\thema{NP}

\begin{loesung}
Ein \spielname-Rätsel kann von einer nicht deterministischen Turing-Maschine
in polynomieller Zeit gelöst werden, wenn es einen polynomiellen
Verifizierer gibt.
Als Lösungszertifikat verlangen wir die gesuchten farbigen Pfade,
wobei die Farbe eines Pfades die Farbe der zwei Vorgabepunkte ist, die er
verbindet.
Die Pfade können dadurch beschrieben werden, dass in jedem Feld die Farbe 
angegeben wird und welche Kanten des Feldes miteinander verbunden werden.
Dies kann zum Beispiel durch die sechs Symbole
$\Gamma = \{-,\vert,\urcorner,\lrcorner,\ulcorner, \llcorner\}$
bewerkstelligt werden.
Man sagt, ein Feld führt zu einem Nachbarfeld, wenn das Symbol aus
$\Gamma$ im Feld mit einem Ende zum Nachbarfeld zeigt.
Enthält ein Feld zum Beispiel das Symbol $\llcorner$, dann führt
das Feld auf die Nachbarfelder oben und rechts.

Der Verifikationsalgorithmus prüft folgendes:
\begin{enumerate}
\item Jedes Vorgabefeld hat genau ein Nachbarfeld gleicher Farbe, welches
auf das Vorgabefeld führt.
\item Jedes Feld führt ausschliesslich zu Feldern gleicher Farbe.
\item Führt ein Feld auf ein Nachbarfeld, welches kein Vorgabefeld ist,
dann führt das Nachbarfeld auch zurück auf das Ausgangsfeld.
\end{enumerate}
Der Aufwand für diese Prüfungen ist
\begin{center}
\begin{tabular}{rl>{$}c<{$}}
1.&Pfade enden in Vorgabepunkten          &O(nm)\\
2.&Gleichfarbigkeit innerhalb eines Pfades&O(nm)\\
3.&Zusammenhang von Pfaden                &O(nm)\\
 &Total                                  &O(nm)
\end{tabular}
\end{center}
Der Aufwand ist also polynomiell in der Problemgrösse $nm$, der Verifizierer
hat polynomielle Laufzeit.
Damit ist gezeigt, dass das Problem in NP ist, also dass eine nicht
deterministische Turingmaschine das Problem in polynomieller Zeit lösen
kann.

Je nach gewählter Datenstruktur für das Spiel und das Lösungszertifikat
kann der Verifikationsalgorithmus in Details abweichen.
Wählt man zum Beispiel für das Zertifikat als Datenstruktur eine Map,
die jeder Farbe einen Pfad zuordnet, dann ist die Gleichfarbigkeit der
Pfade und ihr Zusammenhang bereits sichergestellt, in diesem Fall
ist also weniger zu verifizieren.
Die zusätzliche Arbeit ist Aufgabe des Orakels, welches das Zertifikat
liefert.

Man kann ein \spielname-Spiel auch als ein Ausfüllrätsel betrachten.
Jedes Feld muss mit der Farbe eines der vorgegebenen Punkte oder scharz 
und einem Zeichen aus $\Gamma$ versehen werden.
Die dabei einzuhaltenden Regeln sind die Regeln 1--3, die oben aufgelistet
wurden.
Die Aufwandsberechnung zeigt, dass dies ein polynomielles Ausfüllrätsel ist.
\end{loesung}

\begin{bewertung}
Polynomieller Verifizierer {\bf V} 1 Punkt,
Lösungszertifikat {\bf C} 1 Punkt,
Verifikationsalgorithmus: Pfadenden {\bf E} 1 Punkt,
Gleichfarbigkeit {\bf G} 1 Punkt,
Zusammenhang {\bf Z} 1 Punkt,
Aufwandschätzung ist polynomiell {\bf A} 1 Punkt.
\end{bewertung}


